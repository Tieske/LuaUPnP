<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>Luadocs for ./lua_src/classes/device.lua</title>
    <link rel="stylesheet" href="../../../../luadoc.css" type="text/css" />
	<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../../../../index.html">Index</a></li>
	
</ul>


<!-- Module list -->

<h1>Modules</h1>
<ul>

	<li>
		<a href="../../../../modules/LuaUPnP.html">LuaUPnP</a>
	</li>

	<li>
		<a href="../../../../modules/upnp.action.html">upnp.action</a>
	</li>

	<li>
		<a href="../../../../modules/upnp.argument.html">upnp.argument</a>
	</li>

	<li>
		<a href="../../../../modules/upnp.device.html">upnp.device</a>
	</li>

	<li>
		<a href="../../../../modules/upnp.service.html">upnp.service</a>
	</li>

	<li>
		<a href="../../../../modules/upnp.statevariable.html">upnp.statevariable</a>
	</li>

	<li>
		<a href="../../../../modules/upnp.upnpbase.html">upnp.upnpbase</a>
	</li>

</ul>



<!-- File list -->

<h1>Files</h1>
<ul>

	<li>
		<a href="../../../../files/./lua_src/classes/action.html">./lua_src/classes/action.lua</a>
	</li>

	<li>
		<a href="../../../../files/./lua_src/classes/argument.html">./lua_src/classes/argument.lua</a>
	</li>

	<li><strong>./lua_src/classes/device.lua</strong></li>
	
	<li>
		<a href="../../../../files/./lua_src/classes/service.html">./lua_src/classes/service.lua</a>
	</li>

	<li>
		<a href="../../../../files/./lua_src/classes/statevariable.html">./lua_src/classes/statevariable.lua</a>
	</li>

	<li>
		<a href="../../../../files/./lua_src/classes/upnpbase.html">./lua_src/classes/upnpbase.lua</a>
	</li>

	<li>
		<a href="../../../../files/./lua_src/device_config.html">./lua_src/device_config.lua</a>
	</li>

	<li>
		<a href="../../../../files/./lua_src/init.html">./lua_src/init.lua</a>
	</li>

</ul>






</div> <!-- id="navigation" -->

<div id="content">

<h1>File <code>./lua_src/classes/device.lua</code></h1>


<p>The base object for xPL devices. It features all the main characteristics of the xPL devices, so only user code needs to be added. Starting, stopping, regular heartbeats, configuration has all been implemented in this base class.<br/>&nbsp<br/>No global will be created, it just returns the xpldevice base class. The main xPL module will create a global <code>xpl.classes.xpldevice</code> to access it.<br/>&nbsp<br/>You can create a new device from; <code>xpl.classes.xpldevice:new( {} )</code>, but it is probably best to use the <a href="../files/src/xpl/new_device_template.html">new_device_template.lua</a> file as an example on how to use the <code>xpldevice</code> class</p>



<p>Copyright &copy;2012 <a href="http://www.thijsschreijer.nl">Thijs Schreijer</a>, <a href="http://github.com/Tieske/LuaUPnP">LuaUPnP</a> is licensed under <a href="http://www.gnu.org/licenses/gpl-3.0.html">GPLv3</a></p>


<p><small><b>Release:</b> Version 0.1, LuaxPL framework.</small></p>



<h2>Functions</h2>
<table class="function_list">

	<tr>
	<td class="name" nowrap><a href="#creator">creator</a>&nbsp;(plist, classname, parent)</td>
	<td class="summary">Description of the "creator" callback function as it has to be provided to "device:parsefromxml()".</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#device:adddevice">device:adddevice</a>&nbsp;(device)</td>
	<td class="summary">Adds a sub-device to the device.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#device:addservice">device:addservice</a>&nbsp;(service)</td>
	<td class="summary">Adds a service to the device.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#device:clearlazyness">device:clearlazyness</a>&nbsp;()</td>
	<td class="summary">Clears all the lazy-elements set.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#device:getudn">device:getudn</a>&nbsp;()</td>
	<td class="summary">Gets the udn (unique device name; UUID) of the device.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#device:initialize">device:initialize</a>&nbsp;()</td>
	<td class="summary">Initializes the statevariable object.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#device:parsefromxml">device:parsefromxml</a>&nbsp;(xmldoc, creator, parent)</td>
	<td class="summary">Device constructor method, creates a new device, parsed from a device xml.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#device:setudn">device:setudn</a>&nbsp;(newudn)</td>
	<td class="summary">Sets the udn (unique device name; UUID) of the device.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#device:start">device:start</a>&nbsp;()</td>
	<td class="summary">Startup handler.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#device:stop">device:stop</a>&nbsp;()</td>
	<td class="summary">Shutdown handler.</td>
	</tr>

</table>




<h2>Tables</h2>
<table class="table_list">

	<tr>
	<td class="name" nowrap><a href="#statevariable fields/properties">statevariable fields/properties</a></td>
	<td class="summary">Members of the statevariable object </td>
	</tr>

</table>



<br/>
<br/>




<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="creator"></a><strong>creator</strong>&nbsp;(plist, classname, parent)</dt>
<dd>
Description of the "creator" callback function as it has to be provided to "device:parsefromxml()". This function allows to create the device object hierarchy with custom objects, implemented the required device behaviour. The most common case being to override the <code>action:execute(params)</code> method. NOTE: if the classname "servicexml" a string should be returned allowing the collection of the service description xml.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>plist</em></code>: list of named properties as parsed from the xml, eg. a device could expect a key-value pair <code>friendlyname = "name as specified in xml"</code>. NOTE: alle keys have been converted to lowercase!!
	</li>
	
	<li>
	  <code><em>classname</em></code>: the type of object (or descendant of that type) to be created, this will be any of the following; "device", "service", "statevariable", "action", "argument", or "servicexml".
	</li>
	
	<li>
	  <code><em>parent</em></code>: The parent object to which the requested object will be added. The parent property on the created object will be set afterwards, no need to set it here.
	</li>
	
</ul>








</dd>




<dt><a name="device:adddevice"></a><strong>device:adddevice</strong>&nbsp;(device)</dt>
<dd>
Adds a sub-device to the device.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>device</em></code>: device object to add
	</li>
	
</ul>








</dd>




<dt><a name="device:addservice"></a><strong>device:addservice</strong>&nbsp;(service)</dt>
<dd>
Adds a service to the device.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>service</em></code>: service object to add
	</li>
	
</ul>








</dd>




<dt><a name="device:clearlazyness"></a><strong>device:clearlazyness</strong>&nbsp;()</dt>
<dd>
Clears all the lazy-elements set. Applies to <code>getaction(), getservice(), getdevice(), getroot(), gethandle()</code> methods. Override in subclasses to clear tree-structure.









</dd>




<dt><a name="device:getudn"></a><strong>device:getudn</strong>&nbsp;()</dt>
<dd>
Gets the udn (unique device name; UUID) of the device.









</dd>




<dt><a name="device:initialize"></a><strong>device:initialize</strong>&nbsp;()</dt>
<dd>
Initializes the statevariable object. Will be called upon instantiation of an object, override this method to set default values for all properties.









</dd>




<dt><a name="device:parsefromxml"></a><strong>device:parsefromxml</strong>&nbsp;(xmldoc, creator, parent)</dt>
<dd>
Device constructor method, creates a new device, parsed from a device xml. The device object will be created, including all services and sub devices.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>xmldoc</em></code>: XML document from which a device is to be parsed, this can be either 1) a string value containing the xml, 2) a string value containing the filename of the xml 3) an IXML object containing the 'device' element
	</li>
	
	<li>
	  <code><em>creator</em></code>: callback function to create individual sub objects
	</li>
	
	<li>
	  <code><em>parent</em></code>: the parent object for the device to be created (or nil if a root device)
	</li>
	
</ul>








</dd>




<dt><a name="device:setudn"></a><strong>device:setudn</strong>&nbsp;(newudn)</dt>
<dd>
Sets the udn (unique device name; UUID) of the device. Set it to <code>nil</code> to remove it from the global list and parent object (its own <code>parent</code> property will remain unchanged)


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>newudn</em></code>: New udn for the device
	</li>
	
</ul>








</dd>




<dt><a name="device:start"></a><strong>device:start</strong>&nbsp;()</dt>
<dd>
Startup handler. Called for the event <code>upnp.events.UPnPstarted</code> (event through the Copas Timer eventer mechanism) When called it will call the <code>start()</code> method on all sub-devices. Override in child classes to add specific startup functionality (starting hardware comms for example) See also <code>upnpbase:start()</code>









</dd>




<dt><a name="device:stop"></a><strong>device:stop</strong>&nbsp;()</dt>
<dd>
Shutdown handler. Called for the event <code>upnp.events.UPnPstopping</code> (event through the Copas Timer eventer mechanism) When called it will call the <code>stop()</code> method on all sub-devices. Override in child classes to add specific shutdown functionality (stopping hardware comms for example) See also <code>upnpbase:stop()</code>









</dd>


</dl>




<h2><a name="tables"></a>Tables</h2>
<dl class="table">

<dt><a name="statevariable fields/properties"></a><strong>statevariable fields/properties</strong></dt>
<dd>Members of the statevariable object


<h3>Fields</h3>
<ul>
	
	<li>
	  name: name of the statevariable
	</li>
	
	<li>
	  evented: indicator for the variable to be an evented statevariable
	</li>
	
	<li>
	  _value: internal field holding the value, use <code>get, set</code> and <code>getupnp</code> methods for access
	</li>
	
	<li>
	  _datatype: internal field holding the UPnP type, use <code>getdatatype</code> and <code>setdatatype</code> methods for access
	</li>
	
</ul>


</dd>


</dl>




</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->
</body>
</html>
