<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>upnp.action: Module Index</title>
    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
	<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../index.html">Index</a></li>
	
</ul>


<!-- Module list -->

<h1>Modules</h1>
<ul>

	<li>
		<a href="../modules/upnp.html">upnp</a>
	</li>

	<li><strong>upnp.action</strong></li>
	
	<li>
		<a href="../modules/upnp.argument.html">upnp.argument</a>
	</li>

	<li>
		<a href="../modules/upnp.device.html">upnp.device</a>
	</li>

	<li>
		<a href="../modules/upnp.service.html">upnp.service</a>
	</li>

	<li>
		<a href="../modules/upnp.statevariable.html">upnp.statevariable</a>
	</li>

	<li>
		<a href="../modules/upnp.upnpbase.html">upnp.upnpbase</a>
	</li>

</ul>



<!-- File list -->






</div><!-- id="navigation" -->

<div id="content">

<h1>Module <code>upnp.action</code></h1>

<p>The base object for UPnP actions.</p>


<p>Copyright&copy; 2012 <a href="http://www.thijsschreijer.nl">Thijs Schreijer</a>, <a href="http://github.com/Tieske/LuaUPnP">LuaUPnP</a> is licensed under <a href="http://www.gnu.org/licenses/gpl-3.0.html">GPLv3</a></p>


<p><small><b>Release:</b> Version 0.1, LuaUPnP</small></p>



<h2>Functions</h2>
<table class="function_list">

	<tr>
	<td class="name" nowrap><a href="#action:_execute">action:_execute</a>&nbsp;(params)</td>
	<td class="summary">Executes the action while checking inputs and outputs.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#action:addargument">action:addargument</a>&nbsp;(argument)</td>
	<td class="summary">Adds an argument to the actions argument list.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#action:execute">action:execute</a>&nbsp;(params)</td>
	<td class="summary">Executes the action.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#action:initialize">action:initialize</a>&nbsp;()</td>
	<td class="summary">Initializes the action object.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#action:parsefromxml">action:parsefromxml</a>&nbsp;(xmldoc, creator, parent)</td>
	<td class="summary">Action constructor method, creates a new action, parsed from an XML 'action' element.</td>
	</tr>

</table>




<h2>Tables</h2>
<table class="table_list">

	<tr>
	<td class="name" nowrap><a href="#Action fields/properties">Action fields/properties</a></td>
	<td class="summary">Members of the action object </td>
	</tr>

</table>



<br/>
<br/>



<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="action:_execute"></a><strong>action:_execute</strong>&nbsp;(params)</dt>
<dd>
Executes the action while checking inputs and outputs. Parameter values may be in either UPnP or Lua format. The actual implementation is in <code>action:execute()</code> which will be called by this method. <br/>Actual execution order; <br/>1) <code>action:_execute()</code> verifies correctness of all arguments provided and converts them to Lua equivalents <br/>2) <code>action:execute()</code> gets called to perform actual device behaviour <br/>3) <code>action:_execute()</code> verifies the return values and converts them to UPnP formats <br/>So to implement device behaviour, override the <code>action:execute()</code> method, to execute the action call <code>action:_execute()</code>.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>params</em></code>: table with argument values, indexed by argument name.
	</li>
	
</ul>






<h3>Return value:</h3>
<ul>2 lists (names and values) of the 'out' arguments (in proper order), or <code>nil, errormsg, errornumber</code> upon failure</ul>



<h3>See also:</h3>
<ul>
	
	<!-- <li><a href="#action:execute"> -->
	<li><a href="#action:execute">
		action:execute</li>
	</a>
	
	<!-- <li><a href="#service:executeaction()"> -->
	<li><a href="#service:executeaction()">
		service:executeaction()</li>
	</a>
	
</ul>

</dd>




<dt><a name="action:addargument"></a><strong>action:addargument</strong>&nbsp;(argument)</dt>
<dd>
Adds an argument to the actions argument list. This will append an argument, so adding must be done in proper UPnP order!


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>argument</em></code>: the argument object to be added to the argumentlist
	</li>
	
</ul>








</dd>




<dt><a name="action:execute"></a><strong>action:execute</strong>&nbsp;(params)</dt>
<dd>
Executes the action. Override in descendant classes to implement the actual device behaviour. <br/><strong>NOTE 1</strong>: if not overridden, the default result will be an error; <code>602, Optional Action Not Implemented</code> (hence; from the descedant overridden method, DO NOT call the ancestor method, as it will only return the error) <br/><strong>NOTE 2</strong>: this method is wrapped by <code>action:_execute()</code> from which it will be called. So never call this method directly, if you need to execute, call <code>_execute()</code>. If called externally, it is best to call <a href="upnp.service.html#service:executeaction"><code>service:executeaction()</code></a> as that will also return the proper UPnP error if the action doesn't exist.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>params</em></code>: table with named arguments (each argument indexed by its name). Before calling the arguments will have been checked, converted and counted.
	</li>
	
</ul>






<h3>Return value:</h3>
<ul>table with named return values (each indexed by its name). The returned values can be the Lua types, will be converted to UPnP types (and validated) before sending. Upon an error the function should return; <code>nil, errorstring, errornumber</code> (see the 6xx error codes in the UPnP 1.0 architecture document, section 3.2.2)</ul>



<h3>See also:</h3>
<ul>
	
	<!-- <li><a href="#action:_execute"> -->
	<li><a href="#action:_execute">
		action:_execute</li>
	</a>
	
	<!-- <li><a href="#service:executeaction()"> -->
	<li><a href="#service:executeaction()">
		service:executeaction()</li>
	</a>
	
</ul>

</dd>




<dt><a name="action:initialize"></a><strong>action:initialize</strong>&nbsp;()</dt>
<dd>
Initializes the action object. Will be called upon instantiation of an object, override this method to set default values for all properties.









</dd>




<dt><a name="action:parsefromxml"></a><strong>action:parsefromxml</strong>&nbsp;(xmldoc, creator, parent)</dt>
<dd>
Action constructor method, creates a new action, parsed from an XML 'action' element.


<h3>Parameters:</h3>
<ul>
	
	<li>
	  <code><em>xmldoc</em></code>: an IXML object containing the 'action' element
	</li>
	
	<li>
	  <code><em>creator</em></code>: callback function to create individual sub objects, see <a href="upnp.device.html#creator"><code>creator()</code></a>.
	</li>
	
	<li>
	  <code><em>parent</em></code>: the parent service object for the action to be created
	</li>
	
</ul>






<h3>Return value:</h3>
<ul>action object or <code>nil + error message</code></ul>



</dd>


</dl>




<h2><a name="tables"></a>Tables</h2>
<dl class="table">

<dt><a name="Action fields/properties"></a><strong>Action fields/properties</strong></dt>
<dd>Members of the action object


<h3>Fields</h3>
<ul>
	
	<li>
	  name: name of the action
	</li>
	
	<li>
	  parent: the owning upnpservice object
	</li>
	
	<li>
	  argumentlist: list with arguments, indexed both by name and number (order in the list)
	</li>
	
	<li>
	  argumentcount: number of arguments for the action
	</li>
	
</ul>


</dd>


</dl>



</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->	
</body>
</html>
